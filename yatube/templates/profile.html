{% extends "base.html" %}
{% block title %}Профиль пользователя {{ author.username }}{% endblock %}
{% block header %}Профиль пользователя {{ author.username }}{% endblock %}
{% load thumbnail %}

{% block content %}

<main role="main" class="container">
    <div class="row">

       {% include 'includes/user_card.html' %}
  
       <div class="col-md-9">
       {% if posts_count > 0 %}
       <!-- Начало блока с отдельным постом -->
          <div class="card mb-3 mt-1 shadow-sm">
            <div class="card-body">
              <p class="card-text">
                <!-- Ссылка на страницу автора в атрибуте href; username автора в тексте ссылки -->
                <a href="{% url 'posts:profile' author.username %}">
                  <strong class="d-block text-gray-dark">@{{ author.username }}</strong>
                </a>
                <!-- Картинка -->
                {% thumbnail top_post.image "960x339" crop="center" upscale=True as im %}
                <img class="card-img" src="{{ im.url }}">
                {% endthumbnail %}
                <!-- Текст поста -->
                {{ top_post.text }}
              </p>
              <div class="d-flex justify-content-between align-items-center">
                <div class="btn-group ">
                  <!-- Ссылка на страницу записи в атрибуте href-->
                  <a class="btn btn-sm text-muted" href="{% url 'posts:post' author.username top_post.id %}" role="button">
                    Добавить комментарий
                  </a>
                  <!-- Ссылка на редактирование, показывается только автору записи. 
                  Эту ссылку вы подключите в финальном задании спринта -->
                  <a class="btn btn-sm text-muted" href="{% url 'posts:edit_post' author.username top_post.id %}" role="button">
                    Редактировать
                  </a>
                 </div>
                  <!-- Дата публикации  -->
                  <small class="text-muted">{{ top_post.pub_date|date:"d M Y h:m" }}</small>
              </div>
            </div>
          </div>
          {% endif %} 
          <!-- Конец блока с отдельным постом -->
          <!-- Остальные посты -->
            <div class="container">
              {% for post in page %}
                {% include "post_item.html" with post=post %}
              {% endfor %}
          </div>
        
       <!-- Здесь постраничная навигация паджинатора -->
       {% include "includes/paginator.html" %}
       </div>
    </div>
  </main>
{% endblock %}